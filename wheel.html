<html>
    <head>
        <title>Code Wheel</title>
        <link rel="stylesheet" href="style.css" type="text/css" />
        <script src='js/winwheel/Winwheel.min.js'></script>
        <script src="js/TweenMax.min.js"></script>
    </head>
    <body style="background: transparent; width: 1000px">
        <canvas id='canvas' width='1000' height='800'>
            Canvas not supported, use another browser.
        </canvas>
        <img id="pointer" src="pointer.png" />
        <script>
            let theWheel = new Winwheel({
                'numSegments'  : 10,         // Number of segments
                'outerRadius'  : 400,       // The size of the wheel.
                'textFontSize' : 28,        // Font size.
                'segments'     :            // Definition of all the segments.
                [
                    {'fillStyle' : '#FFA900', 'text' : 'Breaking News'},
                    {'fillStyle' : '#0021C8', 'text' : 'Fist Fight', 'textFillStyle': '#FFFFFF', 'size': 28.8},
                    {'fillStyle' : '#FFD200', 'text' : 'Comey Momey', 'size': 28.8},
                    {'fillStyle' : '#FFA900', 'text' : 'Minute of Mitt', 'size': 23.4},
                    {'fillStyle' : '#FF7100', 'text' : 'Spin Again', 'size': 70.2},
                    {'fillStyle' : '#D96000', 'text' : 'Weiner', 'size': 25.2},
                    {'fillStyle' : '#D9B100', 'text' : 'Flaked', 'size': 57.6},
                    {'fillStyle' : '#D98F00', 'text' : 'Monkeybone', 'size': 25.2},
                    {'fillStyle' : '#A74A00', 'text' : '+5 Minute-Free Minutes', 'size': 50.4, 'textFontSize': 20},
                    {'fillStyle' : '#FFD200', 'text' : 'Freestyle Love Supreme', 'size': 32.4}
                ],
                'animation' :               // Definition of the animation
                {
                    'type'     : 'spinToStop',
                    'duration' : 7,
                    'spins'    : Math.floor(Math.random() * 9),
                    'callbackFinished' : alertPrize,
                    'callbackSound': playTick
                },
                'textFontFamily': 'Bebas Neue',
                'textFontWeight': 500,
                'textOrientation': 'horizontal',
                'textAlignment': 'center'
            });
 
            let hitAudio = new Audio('sound/hit.ogg');
            function playHit() {
                hitAudio.pause();
                hitAudio.currentTime = 0;
                hitAudio.play();
            }

            let againAudio = new Audio('sound/again.ogg');
            function playAgain() {
                againAudio.pause();
                againAudio.currentTime = 0;
                againAudio.play();
            }
            // Called when the animation has finished.
            function alertPrize(indicatedSegment)
            {
                if(indicatedSegment.text === 'Spin Again') {
                    theWheel.rotationAngle = theWheel.rotationAngle % 360;
                    theWheel.animation.spins = Math.floor(Math.random() * 9);
                    window.setTimeout(() => {theWheel.startAnimation()}, 3000);
                    playAgain();
                } else {
                    playHit();
                }
                document.getElementById('winner').textContent = indicatedSegment.text;
            }

            let tickAudio = new Audio('sound/tick.ogg');
            function playTick() {
                tickAudio.pause();
                tickAudio.currentTime = 0;
                tickAudio.play();
            }

            window.setTimeout(() => {theWheel.startAnimation()}, 1000);

        </script>
        <div id="winner">
            
        </div>
    </body>
</html>